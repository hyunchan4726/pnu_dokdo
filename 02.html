<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì—­ì‚¬ íƒ€ì„ë¼ì¸: ì£¼ê¶Œì˜ ê¸°ë¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Timeline Connector Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 24px; /* Adjust based on dot size */
            width: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        /* Chart Container Standards */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 300px;
            max-height: 350px;
            margin: 0 auto;
        }
        @media (min-width: 1024px) {
            .chart-container {
                height: 250px; 
            }
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Deep Ocean Blue -->
    <!-- Application Structure Plan: 
         1. Header: Contextual introduction to Dokdo's history.
         2. Control Dashboard: Sticky sidebar/top bar allowing users to filter by "Era" (Ancient, Joseon, Modern) and "Source Type" (Korea, Japan, Intl).
         3. Main Layout (Two Column on Desktop):
            - Left: Vertical Interactive Timeline. Items are cards that can be filtered.
            - Right: Analytics Panel (Sticky). Shows distribution of evidence types and event frequency over time.
         4. Justification: A timeline is the most natural way to consume this chronological data. The side analytics provide immediate context on *who* was saying *what* during these periods, reinforcing the weight of evidence.
    -->
    <!-- Visualization & Content Choices:
         1. Interactive Timeline (HTML/Tailwind): Core content presentation. Allows scrolling through history.
         2. Donut Chart (Chart.js): "Evidence Distribution" - Shows the ratio of Korean records vs. Japanese acknowledgments vs. Aggression acts. Goal: Inform/Compare.
         3. Bar Chart (Chart.js): "Activity by Era" - Shows when historical mentions peaked. Goal: Change/Trends.
         4. Justification: Charts provide a high-level summary of the textual data, making the argument for sovereignty visually apparent through the volume of historical records versus recent disputes.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-slate-800">

    <!-- Header Section -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-slate-900 tracking-tight">
                        <span class="text-blue-700">ë…ë„</span> ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ
                    </h1>
                    <p class="text-sm text-slate-500 mt-1">ì—­ì‚¬ì  ì‚¬ì‹¤ê³¼ ë¬¸í—Œìœ¼ë¡œ ë³´ëŠ” ë…ë„ ì£¼ê¶Œì˜ ê¸°ë¡</p>
                </div>
                <div class="flex items-center gap-3">
                     <span class="text-xs font-medium px-2 py-1 bg-blue-50 text-blue-700 rounded border border-blue-100">ì´ ê¸°ë¡: <span id="total-count">0</span>ê±´</span>
                     <a href="index.html" class="flex items-center gap-1 px-3 py-1.5 text-xs font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded hover:bg-white hover:text-blue-600 hover:border-blue-200 hover:shadow-sm transition-all">
                        <span>ğŸ </span> í™ˆ
                     </a>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Intro Section -->
        <section class="mb-8 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
            <h2 class="text-lg font-semibold text-slate-900 mb-2">ì‹œê°í™” ëŒ€ì‹œë³´ë“œ ì•ˆë‚´</h2>
            <p class="text-slate-600 leading-relaxed text-sm">
                ì´ ì¸í„°ë™í‹°ë¸Œ ì—°í‘œëŠ” ê³ ëŒ€ ìš°ì‚°êµ­ ì‹œëŒ€ë¶€í„° í˜„ëŒ€ì— ì´ë¥´ê¸°ê¹Œì§€ ë…ë„ì™€ ê´€ë ¨ëœ ì£¼ìš” ì—­ì‚¬ì  ì‚¬ê±´ê³¼ ë¬¸í—Œ ê¸°ë¡ì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. 
                ì¢Œì¸¡(ëª¨ë°”ì¼ì€ ìƒë‹¨)ì˜ í•„í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ <strong>ì‹œê¸°ë³„</strong> í˜¹ì€ <strong>ê¸°ë¡ì˜ ì£¼ì²´ë³„</strong>(í•œêµ­ ì‚¬ë£Œ, ì¼ë³¸ ì‚¬ë£Œ, êµ­ì œ ë¬¸ì„œ ë“±)ë¡œ ë°ì´í„°ë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                ì˜¤ë¥¸ìª½ì˜ ì°¨íŠ¸ëŠ” í˜„ì¬ ì„ íƒëœ í•„í„°ì— ë”°ë¥¸ ë°ì´í„°ì˜ ë¶„í¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ì—¬ì£¼ë©°, ì—­ì‚¬ì  íë¦„ ì†ì—ì„œ ë…ë„ ì£¼ê¶Œì˜ ê·¼ê±°ê°€ ì–´ë–»ê²Œ ê¸°ë¡ë˜ì–´ ì™”ëŠ”ì§€ ì‹œê°ì ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
            </p>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Left Column: Controls & Timeline (Span 8) -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- Filters Controls -->
                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm sticky top-24 z-40 transition-all duration-300" id="filter-panel">
                    <div class="flex flex-col gap-4">
                        <!-- Search -->
                        <div class="relative">
                            <input type="text" id="search-input" placeholder="ì‚¬ê±´ ë‚´ìš©, ì—°ë„ ë˜ëŠ” ì¶œì²˜ ê²€ìƒ‰..." 
                                class="w-full pl-4 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                        </div>

                        <!-- Filter Groups -->
                        <div class="flex flex-col sm:flex-row gap-4 justify-between">
                            <div class="flex-1">
                                <label class="block text-xs font-semibold text-slate-500 mb-2 uppercase tracking-wider">ê¸°ë¡ ìœ í˜• (ì¶œì²˜)</label>
                                <div class="flex flex-wrap gap-2" id="type-filters">
                                    <button class="filter-btn active px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors" data-filter="all">ì „ì²´</button>
                                    <button class="filter-btn px-3 py-1.5 text-xs font-medium rounded-full bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 transition-colors" data-filter="korea">í•œêµ­ ê¸°ë¡/í™œë™</button>
                                    <button class="filter-btn px-3 py-1.5 text-xs font-medium rounded-full bg-green-50 text-green-700 hover:bg-green-100 border border-green-200 transition-colors" data-filter="japan_evidence">ì¼ë³¸ì˜ ì¸ì •(ì¦ê±°)</button>
                                    <button class="filter-btn px-3 py-1.5 text-xs font-medium rounded-full bg-red-50 text-red-700 hover:bg-red-100 border border-red-200 transition-colors" data-filter="dispute">ì¼ë³¸ì˜ ì™œê³¡/ì¹¨íƒˆ</button>
                                    <button class="filter-btn px-3 py-1.5 text-xs font-medium rounded-full bg-purple-50 text-purple-700 hover:bg-purple-100 border border-purple-200 transition-colors" data-filter="intl">êµ­ì œ/ìì—°</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timeline Container -->
                <div class="relative timeline-line pl-2 md:pl-4 space-y-8 py-4" id="timeline-container">
                    <!-- Timeline items will be injected here via JS -->
                </div>
                
                <!-- No Results Message -->
                <div id="no-results" class="hidden text-center py-12">
                    <p class="text-slate-400 font-medium">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Right Column: Analytics (Span 4) -->
            <div class="lg:col-span-4 space-y-6">
                <div class="sticky top-24 space-y-6">
                    
                    <!-- Chart 1: Distribution -->
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-sm font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <span class="w-1 h-4 bg-blue-600 rounded-full"></span>
                            ê¸°ë¡ ìœ í˜•ë³„ ë¶„í¬
                        </h3>
                        <div class="chart-container">
                            <canvas id="typeChart"></canvas>
                        </div>
                        <p class="text-xs text-slate-500 mt-3 text-center">
                            ì„ íƒëœ ê¸°ê°„ ë‚´ ê¸°ë¡ì˜ ì„±ê²©ë³„ ë¹„ì¤‘ì…ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- Chart 2: Timeline Density -->
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-sm font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <span class="w-1 h-4 bg-indigo-600 rounded-full"></span>
                            ì‹œëŒ€ë³„ ì£¼ìš” ì‚¬ê±´ ë¹ˆë„
                        </h3>
                        <div class="chart-container">
                            <canvas id="timelineChart"></canvas>
                        </div>
                        <p class="text-xs text-slate-500 mt-3 text-center">
                            ì—­ì‚¬ì  ê²©ë³€ê¸°ì— ê¸°ë¡ì´ ì§‘ì¤‘ë˜ëŠ” ê²½í–¥ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- Summary Card -->
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 p-5 rounded-xl shadow-lg text-white">
                        <h3 class="text-sm font-bold text-slate-200 mb-2 opacity-80">í•µì‹¬ ìš”ì•½</h3>
                        <p id="insight-text" class="text-sm leading-relaxed">
                            ë°ì´í„°ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...
                        </p>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-100 border-t border-slate-200 mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-slate-500 text-xs">
                ë°ì´í„° ì¶œì²˜: ì œê³µëœ ë…ë„ ì—­ì‚¬ ì—°í‘œ Source Report<br>
                ë³¸ í˜ì´ì§€ëŠ” í•™ìŠµ ë° ì •ë³´ íƒìƒ‰ì„ ìœ„í•´ ì œì‘ëœ ì¸í„°ë™í‹°ë¸Œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
            </p>
        </div>
    </footer>

    <script>
        // --- DATA ---
        // Types: 
        // 1: korea (Korean Record/Activity)
        // 2: japan_evidence (Japanese Record acknowledging Korea or excluding Japan)
        // 3: dispute (Japanese Aggression/Distortion)
        // 4: intl (International/Nature)
        
        const rawData = [
            { year: "460~250ë§Œë…„ ì „", event: "ë…ë„ í˜•ì„± (í™”ì‚°í™œë™)", source: "ì§€ì§ˆí•™ ì—°êµ¬", type: "intl", desc: "ìš¸ë¦‰ë„ë³´ë‹¤ ìƒì„± ì‹œê¸°ê°€ ì•ì„  í™”ì‚°ì„¬ í˜•ì„±" },
            { year: "1454", event: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ ê¸°ë¡", source: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", type: "korea", desc: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ìš¸ì§„í˜„ ì •ë™ìª½ì— ìœ„ì¹˜í•˜ë©° ë‚ ì”¨ê°€ ë§‘ìœ¼ë©´ ì„œë¡œ ë³´ì¸ë‹¤ê³  ê¸°ë¡í•¨." },
            { year: "1481", event: "íŒ”ë„ì´ë„ í‘œê¸°", source: "íŒ”ë„ì´ë„", type: "korea", desc: "ë™í•´ìƒì— ìš¸ë¦‰ë„ì™€ ìš°ì‚°ë„(ë…ë„) ë‘ ì„¬ì„ ëª…í™•íˆ í‘œê¸°í•¨." },
            { year: "1531", event: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ ê¸°ë¡", source: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", type: "korea", desc: "ìš°ì‚°ë„ì™€ ìš¸ë¦‰ë„ê°€ ê³ ì„ ë°”ë¡œ ë™ìª½ ë°”ë‹¤ ê°€ìš´ë° ìˆë‹¤ê³  ê¸°ë¡í•¨." },
            { year: "1667", event: "ì€ì£¼ì‹œì²­í•©ê¸° ê¸°ë¡", source: "ì€ì£¼ì‹œì²­í•©ê¸° (ì¼ë³¸)", type: "japan_evidence", desc: "ì¼ë³¸ ì˜¤í‚¤ì„¬ì„ ì¼ë³¸ì˜ ì„œìª½ ê²½ê³„ë¡œ ì‚¼ì•„ ë…ë„ì™€ ìš¸ë¦‰ë„ê°€ ì¡°ì„  ë•…ì„ì„ ì‹œì‚¬í•¨." },
            { year: "1693", event: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", source: "ì—­ì‚¬ì  ì‚¬ê±´", type: "korea", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ë‚©ì¹˜ë˜ì–´ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥í•˜ê³  ê·€êµ­." },
            { year: "1695", event: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ ì œì¶œ", source: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ (ì¼ë³¸)", type: "japan_evidence", desc: "ì¼ë³¸ ë—í† ë¦¬ë²ˆì´ ë§‰ë¶€ì— ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ë—í† ë¦¬ë²ˆ ì†Œì†ì´ ì•„ë‹˜ì„ ê³µì‹ ë‹µë³€." },
            { year: "1696", event: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´ ë° ë„í•´ ê¸ˆì§€ë ¹", source: "ì—­ì‚¬ì  ì‚¬ê±´", type: "korea", desc: "ì•ˆìš©ë³µì˜ í™œë™ ê²°ê³¼ ì¼ë³¸ ë§‰ë¶€ê°€ 'ì£½ë„(ìš¸ë¦‰ë„) ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¼." },
            { year: "1696", event: "ì¡°ì„ ì£¼ì°©ì•ˆ ì¼ê¶Œì§€ê°ì„œ ì§€ë„", source: "ì¡°ì„ ì£¼ì°©ì•ˆ ì¼ê¶Œì§€ê°ì„œ (ì¼ë³¸)", type: "japan_evidence", desc: "ì•ˆìš©ë³µ ì·¨ì¡° ë³´ê³ ì„œ ì²¨ë¶€ ì§€ë„ì— ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„  ê°•ì›ë„ ì†Œì†ìœ¼ë¡œ ê¸°ë¡ë¨." },
            { year: "1697", event: "ìˆ˜í† ê´€ ì œë„ ì‹œí–‰", source: "ì¡°ì„  ì¡°ì •", type: "korea", desc: "ì¡°ì„  ì •ë¶€ê°€ ìš¸ë¦‰ë„ì™€ ì£¼ë³€ ì„¬ì— ê´€ë¦¬ë¥¼ íŒŒê²¬í•˜ì—¬ ê´€ë¦¬ ì‹œì‘ (1894ë…„ê¹Œì§€ ì§€ì†)." },
            { year: "1779", event: "ê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„", source: "ê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„ (ì¼ë³¸)", type: "japan_evidence", desc: "ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì±„ìƒ‰ë˜ì§€ ì•Šì€ ìƒíƒœ(ì¼ë³¸ ì˜ì—­ ë°–)ë¡œ ê·¸ë ¤ì§." },
            { year: "1785", event: "ì‚¼êµ­ì ‘ì–‘ì§€ë„ í‘œê¸°", source: "ì‚¼êµ­ì ‘ì–‘ì§€ë„ (ì¼ë³¸)", type: "japan_evidence", desc: "ìš¸ë¦‰ë„ì™€ ë…ë„ë¥¼ ì¡°ì„ ê³¼ ê°™ì€ í™©ìƒ‰ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ê³  ëª…ê¸°." },
            { year: "1787~1855", event: "ì„œì–‘ì˜ ë…ë„ ë°œê²¬ ë° ëª…ëª…", source: "ì„œì–‘ ì§€ë„ ë° ê¸°ë¡", type: "intl", desc: "í”„ë‘ìŠ¤(ë¦¬ì•™ì¿ ë¥´), ëŸ¬ì‹œì•„, ì˜êµ­ ë“±ì´ ë…ë„ë¥¼ ë°œê²¬í•˜ê³  ì´ë¦„ì„ ë¶™ì„." },
            { year: "1808", event: "ë§Œê¸°ìš”ëŒ ê¸°ë¡", source: "ë§Œê¸°ìš”ëŒ", type: "korea", desc: "'ìš°ì‚°ì€ ì™œì¸ë“¤ì´ ë§í•˜ëŠ” ì†¡ë„'ë¼ê³  ê¸°ë¡í•˜ë©° ìš°ì‚°êµ­(ì¡°ì„ )ì˜ ë•…ì„ì„ ëª…ì‹œ." },
            { year: "1832", event: "ì‚¼êµ­í†µëŒë„ í‘œê¸°", source: "ì‚¼êµ­í†µëŒë„ (ë…ì¼)", type: "intl", desc: "ìš¸ë¦‰ë„ì™€ ë…ë„ë¥¼ í•œë°˜ë„ì™€ ê°™ì€ ë…¸ë€ìƒ‰ìœ¼ë¡œ í‘œì‹œí•˜ì—¬ ì¡°ì„  ì˜í† ë¡œ ì¸ì •." },
            { year: "1835", event: "ì•„ì„¸ì•„ì†Œë™ì–‘ë„ ì™œê³¡", source: "ì•„ì„¸ì•„ì†Œë™ì–‘ë„ (ì¼ë³¸)", type: "dispute", desc: "ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ ì¼ë³¸ ì˜í† ì¸ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œê¸° (ë‹¹ì‹œ ì¼ë³¸ì˜ ë¶€ì •í™•í•œ ì˜í†  ì¸ì‹)." },
            { year: "1857", event: "í•œë°˜ë„ ë™í•´ì•ˆ ì§€ë„ ì œì‘", source: "ëŸ¬ì‹œì•„ ì§€ë„", type: "intl", desc: "ëŸ¬ì‹œì•„ê°€ ë…ë„ë¥¼ í•œêµ­ì˜ ì˜í† ë¡œ ì¸ì •í•˜ì—¬ ì§€ë„ ì œì‘." },
            { year: "1870", event: "ì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œ", source: "ì¼ë³¸ ì™¸ë¬´ì„± ë³´ê³ ì„œ", type: "japan_evidence", desc: "ì¼ë³¸ ì™¸ë¬´ì„± ê´€ë£Œ ë³´ê³ ì„œì— ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¡°ì„  ì˜í† ê°€ ëœ ì‚¬ì •ì„ ê¸°ë¡." },
            { year: "1877", event: "íƒœì •ê´€ ì§€ë ¹", source: "íƒœì •ê´€ ì§€ë ¹ (ì¼ë³¸)", type: "japan_evidence", desc: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì´ ìš¸ë¦‰ë„ì™€ ë…ë„(1ë„)ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ìŒì„ ëª…ì‹œí•œ ê²°ì •ì  ë¬¸ì„œ." },
            { year: "1900", event: "ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸", source: "ëŒ€í•œì œêµ­ ê´€ë³´", type: "korea", desc: "ìš¸ë¦‰ë„ë¥¼ ìš¸ë„ë¡œ ê°œì¹­í•˜ê³  ë…ë„(ì„ë„)ë¥¼ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ëª…ì‹œ (10ì›” 25ì¼, ë…ë„ì˜ ë‚  ìœ ë˜)." },
            { year: "1904", event: "ë‚˜ì¹´ì´ ìš”ìë¶€ë¡œ ì²­ì›", source: "ì¼ë³¸ ì–´ì—…ì¸ ì²­ì›", type: "dispute", desc: "ì¼ë³¸ ì–´ì—…ì¸ì´ ë…ë„ ì˜í†  í¸ì… ì²­ì›ì„œ ì œì¶œ." },
            { year: "1905", event: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸", source: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ (ì¼ë³¸)", type: "dispute", desc: "ì¼ë³¸ì´ ë…ë„ë¥¼ ë‹¤ì¼€ì‹œë§ˆë¡œ ê°œì¹­í•˜ê³  ì‹œë§ˆë„¤í˜„ì— ê°•ì œ í¸ì… (ë¶ˆë²•)." },
            { year: "1906", event: "ê°•ì›ë„ ê´€ì°°ì‚¬ ë³´ê³  ë° ì§€ë ¹", source: "ì¡°ì„  ì¡°ì •", type: "korea", desc: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì˜ ë³´ê³ ì— ëŒ€í•´ ì˜ì •ë¶€ê°€ ì§€ë ¹ 3í˜¸ë¥¼ í†µí•´ ì¼ë³¸ì˜ ì£¼ì¥ì„ ë¶€ì •." },
            { year: "1946", event: "SCAPIN ì œ677í˜¸", source: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹", type: "intl", desc: "ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œì—ì„œ ì œì™¸í•˜ê³  í•œêµ­ ì˜í† ë¡œ í‘œì‹œ." },
            { year: "1947", event: "ëŒ€ì¼ê°•í™”ì¡°ì•½ 1ì°¨ ì´ˆì•ˆ", source: "êµ­ì œ ì¡°ì•½ ì´ˆì•ˆ", type: "intl", desc: "ì¼ë³¸ì´ í¬ê¸°í•´ì•¼ í•  ì˜í† ì— ë…ë„(Liancourt Rock)ë¥¼ ëª…ì‹œ." },
            { year: "1950", event: "ì—°í•©êµ­ í•©ì˜ì„œ ë¶€ì†ì§€ë„", source: "ì—°í•©êµ­ í•©ì˜ì„œ", type: "intl", desc: "ë…ë„ë¥¼ í•œêµ­ ì˜í† ë¡œ í‘œê¸°." },
            { year: "1951.01", event: "í‰í™”ì„ (ì´ìŠ¹ë§Œ ë¼ì¸) ì„ í¬", source: "ëŒ€í•œë¯¼êµ­ ì •ë¶€", type: "korea", desc: "ë…ë„ë¥¼ í¬í•¨í•œ ì¸ê·¼ ìˆ˜ì—­ì— ëŒ€í•œ ì£¼ê¶Œ í–‰ì‚¬ ì„ ì–¸." },
            { year: "1951.09", event: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ ì²´ê²°", source: "êµ­ì œ ì¡°ì•½", type: "intl", desc: "ë…ë„ ëª…ì¹­ì´ ë¹ ì¡Œìœ¼ë‚˜, í•œêµ­ ì˜í†  í¬ê¸° ì¡°í•­ì€ í¬í•¨ë¨." },
            { year: "1953", event: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", source: "ë¯¼ê°„ í™œë™", type: "korea", desc: "í™ìˆœì¹  ëŒ€ì¥ ë“± ë¯¼ê°„ì¸ë“¤ì´ ìë°œì ìœ¼ë¡œ ë…ë„ ê²½ë¹„ ì‹œì‘." },
            { year: "1954/1962", event: "ì¼ë³¸ì˜ ICJ ì œì†Œ ì œì•ˆ", source: "ì™¸êµ ë¬¸ì„œ", type: "dispute", desc: "ì¼ë³¸ì´ êµ­ì œì‚¬ë²•ì¬íŒì†Œ íšŒë¶€ë¥¼ ì œì•ˆí–ˆìœ¼ë‚˜ í•œêµ­ ì •ë¶€ê°€ ì¼ì¶•." },
            { year: "1965", event: "í•œì¼ê¸°ë³¸ì¡°ì•½ ì²´ê²°", source: "ì™¸êµ ì¡°ì•½", type: "intl", desc: "ë…ë„ ë¬¸ì œëŠ” í•´ê²°ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•œë‹¤ëŠ” í•©ì˜ í•˜ì— êµ­êµ ì •ìƒí™”." },
            { year: "1968", event: "ìµœì¢…ë• ê±°ì£¼ ì‹œì‘", source: "ë¯¼ê°„ í™œë™", type: "korea", desc: "ë…ë„ ì„œë„ì— ê±°ì£¼ì‹œì„¤ì„ ì§“ê³  ìµœì´ˆì˜ ì£¼ë¯¼ ìƒí™œ ì‹œì‘." },
            { year: "1998", event: "ì‹ í•œì¼ ì–´ì—…í˜‘ì •", source: "ì™¸êµ í˜‘ì •", type: "dispute", desc: "ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©´ì„œ ë…¼ë€ ë°œìƒ." },
            { year: "1999/2000", event: "ë…ë„ìˆ˜í˜¸ëŒ€ ì°½ì„¤", source: "ì‹œë¯¼ ë‹¨ì²´", type: "korea", desc: "ë…ë„ì˜ ë‚  ì œì • ìš´ë™ ë“± ì‹œë¯¼ í™œë™ ë³¸ê²©í™”." },
            { year: "2005", event: "'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì œì •", source: "ì‹œë§ˆë„¤í˜„ ì¡°ë¡€", type: "dispute", desc: "ì‹œë§ˆë„¤í˜„ ì˜íšŒê°€ 2ì›” 22ì¼ì„ ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ë¡œ ì œì •." },
            { year: "2006", event: "ëŒ€í†µë ¹ íŠ¹ë³„ë‹´í™”", source: "ëŒ€í•œë¯¼êµ­ ì •ë¶€", type: "korea", desc: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹ì´ ë…ë„ ë¬¸ì œì— ëŒ€í•œ ê°•ê²½í•œ ì…ì¥ ë°œí‘œ." },
            { year: "2008", event: "ë…ë„ì—°êµ¬ì†Œ ì„¤ë¦½", source: "ì •ë¶€ ê¸°ê´€", type: "korea", desc: "ë™ë¶ì•„ì—­ì‚¬ì¬ë‹¨ ì‚°í•˜ ë…ë„ì—°êµ¬ì†Œ ì„¤ë¦½." },
            { year: "2008", event: "ì¼ë³¸ í•™ìŠµì§€ë„ìš”ë ¹ í•´ì„¤ì„œ ì™œê³¡", source: "ì¼ë³¸ ë¬¸ë¶€ê³¼í•™ì„±", type: "dispute", desc: "ë…ë„ë¥¼ ì¼ë³¸ ì˜í† ë¡œ ê°€ë¥´ì¹  ê²ƒì„ ê³µì‹ ì£¼ë¬¸." },
            { year: "2011", event: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡ ì‹¬í™”", source: "ì¼ë³¸ êµê³¼ì„œ", type: "dispute", desc: "ì¤‘í•™êµ êµê³¼ì„œì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ ê¸°ìˆ  í¬í•¨." },
            { year: "2015", event: "ì¼ë³¸ ì´ˆë“±í•™êµ êµê³¼ì„œ ì™œê³¡", source: "ì¼ë³¸ êµê³¼ì„œ", type: "dispute", desc: "ê²€ì • í•©ê²© êµê³¼ì„œ ëª¨ë‘ì— 'í•œêµ­ ë¶ˆë²• ì ê±°' ë‚´ìš© í¬í•¨." }
        ];

        // --- STATE MANAGEMENT ---
        let currentFilter = 'all';
        let searchQuery = '';

        // --- DOM ELEMENTS ---
        const timelineContainer = document.getElementById('timeline-container');
        const searchInput = document.getElementById('search-input');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const noResults = document.getElementById('no-results');
        const totalCountEl = document.getElementById('total-count');
        const insightText = document.getElementById('insight-text');

        // --- CHART INSTANCES ---
        let typeChartInstance = null;
        let timelineChartInstance = null;

        // --- UTILS ---
        const getTypeColor = (type) => {
            const map = {
                'korea': 'bg-blue-100 text-blue-800 border-blue-200',
                'japan_evidence': 'bg-green-100 text-green-800 border-green-200',
                'dispute': 'bg-red-100 text-red-800 border-red-200',
                'intl': 'bg-purple-100 text-purple-800 border-purple-200'
            };
            return map[type] || 'bg-slate-100 text-slate-800 border-slate-200';
        };

        const getTypeLabel = (type) => {
            const map = {
                'korea': 'í•œêµ­ ê¸°ë¡/í™œë™',
                'japan_evidence': 'ì¼ë³¸ì˜ ì¸ì •(ì¦ê±°)',
                'dispute': 'ì¼ë³¸ì˜ ì™œê³¡/ì¹¨íƒˆ',
                'intl': 'êµ­ì œ/ìì—°'
            };
            return map[type] || 'ê¸°íƒ€';
        };

        const getChartColor = (type) => {
             const map = {
                'korea': '#3b82f6', // blue-500
                'japan_evidence': '#22c55e', // green-500
                'dispute': '#ef4444', // red-500
                'intl': '#a855f7' // purple-500
            };
            return map[type] || '#94a3b8';
        };

        // --- RENDER FUNCTIONS ---
        function renderTimeline(data) {
            timelineContainer.innerHTML = '';
            
            if (data.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            data.forEach((item, index) => {
                const isEven = index % 2 === 0;
                
                const el = document.createElement('div');
                el.className = 'relative pl-8 sm:pl-10 group';
                
                // Content HTML
                el.innerHTML = `
                    <!-- Dot -->
                    <div class="absolute left-0 top-1.5 w-5 h-5 rounded-full border-4 border-white shadow-sm z-10 box-content
                        ${item.type === 'dispute' ? 'bg-red-500' : item.type === 'japan_evidence' ? 'bg-green-500' : item.type === 'korea' ? 'bg-blue-500' : 'bg-purple-500'}">
                    </div>
                    
                    <!-- Card -->
                    <div class="bg-white p-5 rounded-lg border border-slate-200 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer">
                        <div class="flex flex-col sm:flex-row sm:items-start justify-between gap-2 mb-2">
                            <span class="inline-block px-2 py-0.5 rounded text-xs font-bold bg-slate-100 text-slate-600 self-start">
                                ${item.year}
                            </span>
                            <span class="inline-block px-2 py-0.5 rounded text-[10px] font-medium border ${getTypeColor(item.type)} self-start sm:self-auto">
                                ${getTypeLabel(item.type)}
                            </span>
                        </div>
                        <h4 class="text-lg font-bold text-slate-800 mb-1">${item.event}</h4>
                        <p class="text-xs text-slate-500 font-medium mb-3 border-b border-slate-100 pb-2">ì¶œì²˜: ${item.source}</p>
                        <p class="text-sm text-slate-600 leading-relaxed">${item.desc}</p>
                    </div>
                `;
                
                timelineContainer.appendChild(el);
            });
            
            totalCountEl.textContent = data.length;
        }

        function updateCharts(data) {
            // 1. Distribution Data
            const typeCounts = { 'korea': 0, 'japan_evidence': 0, 'dispute': 0, 'intl': 0 };
            data.forEach(d => {
                if(typeCounts[d.type] !== undefined) typeCounts[d.type]++;
            });

            const distData = [typeCounts.korea, typeCounts.japan_evidence, typeCounts.dispute, typeCounts.intl];
            
            // Update Insight Text
            const total = data.length;
            if (total > 0) {
                const evidenceRatio = Math.round(((typeCounts.korea + typeCounts.japan_evidence + typeCounts.intl) / total) * 100);
                insightText.innerHTML = `
                    í˜„ì¬ ì¡°íšŒëœ <span class="font-bold text-white">${total}</span>ê±´ì˜ ê¸°ë¡ ì¤‘ 
                    <span class="font-bold text-green-400">${evidenceRatio}%</span>ê°€ í•œêµ­ì˜ ì£¼ê¶Œì„ ë’·ë°›ì¹¨í•˜ëŠ” êµ­ë‚´ì™¸ ì‚¬ë£Œ ë° ì¼ë³¸ ì¸¡ì˜ ì¸ì • ê¸°ë¡ì…ë‹ˆë‹¤.
                    ${typeCounts.dispute > 0 ? `<br><br>ì¼ë³¸ì˜ ì˜ìœ ê¶Œ ì£¼ì¥ì€ <span class="text-red-300">${typeCounts.dispute}ê±´</span>ìœ¼ë¡œ ì£¼ë¡œ 1905ë…„ ì´í›„ì— ì§‘ì¤‘ë˜ì–´ ìˆìŠµë‹ˆë‹¤.` : ''}
                `;
            } else {
                insightText.textContent = "í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            // Render Chart 1: Doughnut
            const ctx1 = document.getElementById('typeChart').getContext('2d');
            if (typeChartInstance) typeChartInstance.destroy();
            
            typeChartInstance = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['í•œêµ­ ê¸°ë¡', 'ì¼ë³¸(ì¦ê±°)', 'ì¼ë³¸(ë¶„ìŸ)', 'êµ­ì œ/ìì—°'],
                    datasets: [{
                        data: distData,
                        backgroundColor: [getChartColor('korea'), getChartColor('japan_evidence'), getChartColor('dispute'), getChartColor('intl')],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 10, font: { size: 10, family: "'Noto Sans KR', sans-serif" } } },
                        tooltip: { 
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) label += ': ';
                                    let value = context.raw;
                                    let percentage = Math.round((value / total) * 100) + '%';
                                    return label + value + 'ê±´ (' + percentage + ')';
                                }
                            }
                        }
                    }
                }
            });

            // 2. Timeline Density Data (Bucketing)
            // Group by Era: Pre-1900, 1900-1945, 1946-1999, 2000+
            const eras = { 'ì¡°ì„ ì‹œëŒ€ ì´ì „': 0, 'ê°œí•­ê¸°~ì¼ì œê°•ì ê¸°': 0, 'ê´‘ë³µ~1990ë…„ëŒ€': 0, '2000ë…„ëŒ€ ì´í›„': 0 };
            
            data.forEach(d => {
                const yearStr = d.year.split(/[\.~]/)[0]; // Get first part of year string
                const year = parseInt(yearStr);
                
                if (isNaN(year)) { // Handle "460~250ë§Œë…„ ì „"
                    eras['ì¡°ì„ ì‹œëŒ€ ì´ì „']++;
                } else if (year < 1900) {
                    eras['ì¡°ì„ ì‹œëŒ€ ì´ì „']++;
                } else if (year < 1946) {
                    eras['ê°œí•­ê¸°~ì¼ì œê°•ì ê¸°']++;
                } else if (year < 2000) {
                    eras['ê´‘ë³µ~1990ë…„ëŒ€']++;
                } else {
                    eras['2000ë…„ëŒ€ ì´í›„']++;
                }
            });

            // Render Chart 2: Bar
            const ctx2 = document.getElementById('timelineChart').getContext('2d');
            if (timelineChartInstance) timelineChartInstance.destroy();

            timelineChartInstance = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: Object.keys(eras),
                    datasets: [{
                        label: 'ì‚¬ê±´/ê¸°ë¡ ìˆ˜',
                        data: Object.values(eras),
                        backgroundColor: '#64748b',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { display: true, drawBorder: false } },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            padding: 10,
                            bodyFont: { family: "'Noto Sans KR', sans-serif" }
                        }
                    }
                }
            });
        }

        function filterAndRender() {
            const filtered = rawData.filter(item => {
                // Type Filter
                const typeMatch = currentFilter === 'all' || item.type === currentFilter;
                
                // Search Filter
                const searchLower = searchQuery.toLowerCase();
                const searchMatch = !searchQuery || 
                    item.event.toLowerCase().includes(searchLower) ||
                    item.desc.toLowerCase().includes(searchLower) ||
                    item.year.includes(searchLower) ||
                    item.source.toLowerCase().includes(searchLower);

                return typeMatch && searchMatch;
            });

            renderTimeline(filtered);
            updateCharts(filtered);
        }

        // --- EVENT LISTENERS ---
        
        // Filter Buttons
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Update UI
                filterBtns.forEach(b => b.classList.remove('active', 'bg-slate-200', 'text-slate-800'));
                filterBtns.forEach(b => { 
                     // Reset to base styles based on their color class logic (simplified reset here)
                     if(b !== btn) {
                        if(b.dataset.filter === 'all') b.className = 'filter-btn px-3 py-1.5 text-xs font-medium rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors';
                        // Keep colorful styles for others, just remove active visual weight if needed. 
                        // Actually, the button styles in HTML are static colors. Let's just mark the clicked one visually stronger.
                        b.style.opacity = '0.6';
                     }
                });
                
                btn.style.opacity = '1';
                btn.classList.add('active');
                
                // Update State
                currentFilter = btn.dataset.filter;
                filterAndRender();
            });
        });

        // Search Input
        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value;
            filterAndRender();
        });

        // --- INITIALIZATION ---
        // Set initial active state visual
        filterBtns.forEach(b => b.dataset.filter !== 'all' ? b.style.opacity = '0.6' : b.style.opacity = '1');
        
        filterAndRender();

    </script>
</body>
</html>
